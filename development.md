# 泰式按摩网站开发文档 (含管理后台及多语言自动翻译)

## 1. 项目概述

### 1.1 项目背景与目标

本项目旨在构建一个专业的泰式按摩服务网站，包含前端展示和后台管理两大模块。该网站将面向国际客户，提供多语言支持，并通过直观的界面展示按摩服务、专业按摩师团队，同时提供便捷的在线预约功能。

### 1.2 核心功能

- **多语言支持**：支持英文、中文、泰语和韩语，满足不同国籍客户需求
- **响应式设计**：在各种设备（手机、平板、桌面）上提供最佳用户体验
- **内容管理系统**：通过后台管理系统轻松更新网站内容
- **自动翻译**：管理员只需输入英文内容，系统自动翻译为其他语言
- **在线预约**：客户可在线选择服务、按摩师和时间进行预约

### 1.3 目标用户

- **终端用户**：寻找泰式按摩服务的国际客户和本地客户
- **管理员**：负责管理网站内容和预约的工作人员

## 2. 技术架构

### 2.1 技术栈选择

#### 2.1.1 前端技术
- **框架**：Next.js 14（App Router）
- **UI库**：React 18
- **类型系统**：TypeScript
- **样式解决方案**：Tailwind CSS
- **国际化**：next-intl

#### 2.1.2 后端技术
- **API**：Next.js API Routes
- **数据库访问**：Prisma ORM
- **数据库**：PostgreSQL
- **翻译服务**：OpenRouter / Google Translate API / DeepL API
- **认证**：NextAuth.js

#### 2.1.3 内容编辑
- **富文本编辑器**：TipTap（基于ProseMirror）
- **图片处理**：Sharp

### 2.2 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│                        客户端浏览器                           │
└───────────────────────────┬─────────────────────────────────┘
                            │
┌───────────────────────────▼─────────────────────────────────┐
│                        Next.js 应用                          │
│  ┌─────────────────┐    ┌──────────────────┐                │
│  │    前端页面      │    │   API Routes     │                │
│  │  (React组件)    │    │  (后端服务接口)   │                │
│  └────────┬────────┘    └─────────┬────────┘                │
│           │                       │                         │
│  ┌────────▼────────┐    ┌─────────▼────────┐                │
│  │   next-intl     │    │     Prisma       │                │
│  │  (国际化处理)    │    │   (数据库ORM)    │                │
│  └─────────────────┘    └─────────┬────────┘                │
└─────────────────────────────────┬─┴─────────────────────────┘
                                  │
         ┌─────────────────┐      │      ┌─────────────────┐
         │  翻译服务 API    │◄─────┴─────►│   PostgreSQL    │
         │ (OpenRouter等)  │             │    数据库       │
         └─────────────────┘             └─────────────────┘
```

## 3. 详细功能规格

### 3.1 前端网站

#### 3.1.1 公共组件
- **Header**：导航菜单、语言切换器、预约按钮
- **Footer**：联系信息、社交媒体链接、版权信息
- **LanguageSwitcher**：语言切换组件，支持四种语言切换

#### 3.1.2 页面组件
- **首页**
  - 全屏轮播图展示（Hero组件）
  - 服务简介（Services组件）
  - 按摩师团队展示（Therapists组件）
  - 客户评价（Testimonials组件）
  - 关于我们简介（About组件）
  - 联系方式（Contact组件）

- **关于我们页面**
  - 店铺历史和理念
  - 团队介绍
  - 环境展示

- **服务项目页面**
  - 服务分类展示
  - 服务详情（描述、价格、时长）
  - 服务预约入口

- **按摩师团队页面**
  - 按摩师列表
  - 按摩师详情（姓名、专长、经验、照片）
  - 按摩师筛选（按专长、经验等）

- **联系我们页面**
  - 联系表单
  - 地图位置
  - 联系方式（电话、邮箱、社交媒体）
  - IM联系方式（WhatsApp、Line、WeChat、Telegram）

- **预约页面**
  - 多步骤预约表单
    1. 选择服务
    2. 选择按摩师
    3. 选择日期和时间
    4. 填写个人信息
    5. 确认预约

#### 3.1.3 SEO优化
- **元数据优化**：为每个页面和每种语言提供适当的title和meta描述
- **结构化数据**：添加JSON-LD结构化数据，提高搜索结果展示效果
- **多语言SEO**：使用hreflang标签指示语言关系
- **图片优化**：使用Next.js的Image组件自动优化图片，添加适当的alt文本
- **语义化HTML**：使用适当的HTML标签结构

### 3.2 后台管理系统

#### 3.2.1 认证与授权
- **登录系统**：基于NextAuth.js的安全登录
- **权限管理**：管理员角色和权限设置
- **会话管理**：安全的会话处理和过期机制

#### 3.2.2 仪表盘
- **数据概览**：预约数量、访问量、热门服务等
- **最新预约**：最近的预约信息
- **系统状态**：翻译服务状态、系统健康状况

#### 3.2.3 内容管理
- **按摩师管理**
  - 添加按摩师（基本信息、专长、经验、照片）
  - 编辑/删除按摩师信息
  - 查看按摩师列表
  - 自动翻译按摩师信息

- **服务项目管理**
  - 添加服务项目（名称、描述、价格、时长、图片）
  - 编辑/删除服务项目
  - 服务分类管理
  - 自动翻译服务信息

- **店铺基本信息管理**
  - 店铺名称、地址、联系电话、邮箱
  - 营业时间设置
  - 社交媒体链接
  - 自动翻译店铺信息

- **IM联系方式管理**
  - 上传WhatsApp、Line、WeChat、Telegram二维码
  - 设置IM账号信息
  - 管理IM显示顺序

#### 3.2.4 预约管理
- **预约列表**：查看所有预约
- **预约详情**：查看预约详细信息
- **预约状态管理**：更新预约状态（确认、取消、完成）
- **预约筛选**：按日期、按摩师、服务类型筛选
- **预约导出**：导出预约数据（CSV、Excel）

#### 3.2.5 用户管理
- **管理员账户管理**：创建、编辑、删除管理员账户
- **角色管理**：设置不同角色的权限
- **操作日志**：记录管理员的操作历史

#### 3.2.6 留言管理
- **留言列表**：查看客户留言
- **留言回复**：回复客户留言
- **留言状态管理**：标记已处理/未处理

## 4. 国际化 (i18n) 实现方案

### 4.1 前端国际化

#### 4.1.1 技术选择
- **框架**：next-intl
- **支持语言**：英文(en)、中文(zh)、泰语(th)、韩语(ko)
- **默认语言**：英文(en)

#### 4.1.2 实现方式
- **动态路由**：使用Next.js的`[locale]`动态路由参数实现多语言路由
- **中间件**：通过middleware自动检测用户浏览器语言设置
- **语言切换**：提供直观的语言切换组件
- **翻译文件**：使用JSON格式存储各语言的翻译文本

#### 4.1.3 翻译文件结构
```
src/
└── i18n/
    └── messages/
        ├── en.json
        ├── zh.json
        ├── th.json
        └── ko.json
```

### 4.2 后台自动翻译

#### 4.2.1 翻译服务选择
- **主要服务**：OpenRouter（可接入多种大语言模型）
- **备选服务**：Google Translate API / DeepL API
- **翻译质量比较**：针对泰式按摩专业术语的翻译质量评估

#### 4.2.2 翻译流程设计
1. **内容输入**：管理员在后台使用TipTap编辑器输入英文内容
2. **翻译触发**：
   - 自动触发：使用防抖函数，在用户停止输入一段时间后自动触发
   - 手动触发：编辑器工具栏中的"翻译"按钮
3. **内容处理**：
   - 纯文本字段：直接发送到翻译API
   - Markdown内容：将Markdown转换为HTML，翻译后再转回Markdown
4. **翻译执行**：
   - 调用翻译API，将英文内容翻译为中文、泰语和韩语
   - 处理翻译API的响应和错误
5. **结果存储**：
   - 将原文和翻译后的内容存储到数据库中
   - 更新翻译状态和时间戳

#### 4.2.3 翻译优化策略
- **术语表**：为泰式按摩专业术语建立术语表，确保翻译一致性
- **缓存机制**：使用Redis缓存常用翻译，减少API调用
- **批量翻译**：将多个小段文本合并为一个请求，减少API调用次数
- **增量翻译**：只翻译修改过的部分，而不是整个文档
- **翻译质量反馈**：允许管理员标记不准确的翻译，用于后续改进

## 5. 数据库设计

### 5.1 数据库选择
- **数据库**：PostgreSQL
- **ORM**：Prisma
- **迁移管理**：Prisma Migrate

### 5.2 数据模型

#### 5.2.1 核心数据表
```
┌─────────────────┐      ┌─────────────────────────┐
│    therapists   │      │   therapist_translations │
├─────────────────┤      ├─────────────────────────┤
│ id              │──┐   │ id                      │
│ created_at      │  │   │ therapist_id            │
│ updated_at      │  └──►│ locale                  │
│ image_url       │      │ name                    │
│ specialties     │      │ bio                     │
│ experience_years│      │ specialties_translation │
└─────────────────┘      └─────────────────────────┘

┌─────────────────┐      ┌─────────────────────────┐
│    services     │      │    service_translations  │
├─────────────────┤      ├─────────────────────────┤
│ id              │──┐   │ id                      │
│ created_at      │  │   │ service_id              │
│ updated_at      │  └──►│ locale                  │
│ price           │      │ name                    │
│ duration        │      │ description             │
│ image_url       │      │ slug                    │
└─────────────────┘      └─────────────────────────┘

┌─────────────────┐      ┌─────────────────────────┐
│    bookings     │      │         users           │
├─────────────────┤      ├─────────────────────────┤
│ id              │      │ id                      │
│ created_at      │      │ email                   │
│ updated_at      │      │ password_hash           │
│ service_id      │      │ name                    │
│ therapist_id    │      │ role                    │
│ date            │      │ created_at              │
│ time            │      │ updated_at              │
│ customer_name   │      │ last_login              │
│ customer_email  │      └─────────────────────────┘
│ customer_phone  │
│ status          │
└─────────────────┘

┌─────────────────┐      ┌─────────────────────────┐
│  shop_settings  │      │ shop_settings_translations│
├─────────────────┤      ├─────────────────────────┤
│ id              │──┐   │ id                      │
│ created_at      │  │   │ setting_id              │
│ updated_at      │  └──►│ locale                  │
│ key             │      │ value                   │
│ type            │      └─────────────────────────┘
└─────────────────┘
```

#### 5.2.2 Prisma Schema 设计要点
- **关系设计**：使用外键关联相关表
- **索引设计**：为常用查询字段创建索引
- **枚举类型**：使用Prisma枚举定义状态等字段
- **默认值**：为重要字段设置合理的默认值
- **验证规则**：使用Prisma验证器确保数据完整性

## 6. Markdown编辑器实现

### 6.1 TipTap编辑器配置

#### 6.1.1 核心功能
- **基础格式**：标题、段落、列表、引用、粗体、斜体等
- **扩展功能**：链接、图片、表格、代码块
- **特殊功能**：占位符、字数统计、自动保存

#### 6.1.2 自定义工具栏
- **格式控制**：文本格式化按钮
- **媒体插入**：图片上传按钮
- **翻译功能**：翻译按钮和翻译状态指示器

#### 6.1.3 翻译集成
- **内容获取**：从编辑器获取Markdown内容
- **翻译处理**：处理Markdown特殊语法
- **结果预览**：显示翻译结果预览
- **翻译应用**：将翻译结果应用到其他语言版本

### 6.2 Markdown处理流程

#### 6.2.1 Markdown转换
1. **Markdown → HTML**：使用remark/rehype转换Markdown为HTML
2. **HTML翻译**：发送HTML到翻译API
3. **HTML → Markdown**：将翻译后的HTML转回Markdown

#### 6.2.2 特殊内容处理
- **代码块**：保留代码块不翻译
- **图片描述**：仅翻译alt文本
- **表格**：保持表格结构，仅翻译内容
- **链接**：保留URL，仅翻译链接文本

## 7. API设计

### 7.1 RESTful API

#### 7.1.1 按摩师管理API
- `GET /api/therapists` - 获取按摩师列表
- `GET /api/therapists/:id` - 获取单个按摩师详情
- `POST /api/therapists` - 创建新按摩师
- `PUT /api/therapists/:id` - 更新按摩师信息
- `DELETE /api/therapists/:id` - 删除按摩师

#### 7.1.2 服务管理API
- `GET /api/services` - 获取服务列表
- `GET /api/services/:id` - 获取单个服务详情
- `POST /api/services` - 创建新服务
- `PUT /api/services/:id` - 更新服务信息
- `DELETE /api/services/:id` - 删除服务

#### 7.1.3 预约管理API
- `GET /api/bookings` - 获取预约列表
- `GET /api/bookings/:id` - 获取单个预约详情
- `POST /api/bookings` - 创建新预约
- `PUT /api/bookings/:id` - 更新预约状态
- `DELETE /api/bookings/:id` - 删除预约

#### 7.1.4 翻译API
- `POST /api/translate` - 翻译文本内容
- `POST /api/translate/markdown` - 翻译Markdown内容

#### 7.1.5 认证API
- `POST /api/auth/login` - 用户登录
- `POST /api/auth/logout` - 用户登出
- `GET /api/auth/me` - 获取当前用户信息

### 7.2 API响应格式

#### 7.2.1 成功响应
```
{
  "success": true,
  "data": { ... },
  "message": "操作成功"
}
```

#### 7.2.2 错误响应
```
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "错误描述"
  }
}
```

## 8. 部署与运维

### 8.1 开发环境

#### 8.1.1 本地开发
- **Node.js版本**：18.17.0或更高
- **包管理器**：pnpm
- **环境变量**：使用.env.local配置本地环境变量
- **数据库**：本地PostgreSQL或Docker容器

#### 8.1.2 开发流程
- **代码规范**：ESLint + Prettier
- **提交规范**：Conventional Commits
- **分支策略**：GitHub Flow
- **CI/CD**：GitHub Actions

### 8.2 生产环境

#### 8.2.1 部署平台
- **推荐平台**：Vercel
- **备选方案**：AWS、DigitalOcean、Railway

#### 8.2.2 数据库部署
- **推荐服务**：Neon（PostgreSQL）
- **备选方案**：Supabase、AWS RDS

#### 8.2.3 监控与日志
- **应用监控**：Vercel Analytics
- **错误跟踪**：Sentry
- **日志管理**：Logtail

### 8.3 安全措施

#### 8.3.1 应用安全
- **认证**：使用NextAuth.js实现安全认证
- **授权**：基于角色的访问控制
- **API安全**：使用CSRF令牌和速率限制
- **数据验证**：服务器端验证所有输入

#### 8.3.2 数据安全
- **敏感信息**：使用环境变量存储API密钥
- **数据备份**：定期备份数据库
- **HTTPS**：强制使用HTTPS

## 9. 性能优化

### 9.1 前端优化

#### 9.1.1 加载性能
- **代码分割**：使用Next.js的动态导入
- **图片优化**：使用Next.js Image组件
- **字体优化**：使用next/font优化字体加载
- **预取**：预取可能需要的页面

#### 9.1.2 运行时性能
- **组件优化**：使用React.memo和useMemo
- **状态管理**：合理使用状态管理
- **虚拟列表**：处理长列表时使用虚拟滚动

### 9.2 后端优化

#### 9.2.1 数据库优化
- **索引优化**：为常用查询创建索引
- **查询优化**：优化复杂查询
- **连接池**：使用连接池管理数据库连接

#### 9.2.2 API优化
- **缓存**：使用Redis缓存常用数据
- **批处理**：合并多个小请求为一个批处理请求
- **压缩**：启用HTTP压缩

## 10. 测试策略

### 10.1 单元测试
- **框架**：Jest
- **组件测试**：React Testing Library
- **覆盖率目标**：核心功能80%以上

### 10.2 集成测试
- **API测试**：使用Jest和自定义测试工具测试API端点
- **数据库测试**：使用测试数据库进行集成测试
- **测试数据**：使用专门的种子数据进行测试

### 10.3 端到端测试
- **框架**：Playwright
- **测试范围**：关键用户流程（预约流程、管理员操作等）

### 10.4 API测试
- **测试工具**：Jest + 自定义测试工具
- **测试范围**：所有API端点的CRUD操作
- **测试内容**：
  - 正常操作测试：验证API在正常情况下的行为
  - 错误处理测试：验证API在异常情况下的错误处理
  - 数据验证测试：验证API的输入验证功能
  - 权限测试：验证API的权限控制功能
- **测试环境**：使用独立的测试数据库
- **自动化测试**：通过CI/CD流程自动运行API测试

## 11. 项目时间线

### 11.1 阶段一：基础架构（2周）
- 项目初始化和技术选型
- 数据库设计和ORM配置
- 基础组件开发
- 国际化框架搭建

### 11.2 阶段二：前端开发（3周）
- 首页和核心页面开发
- 响应式设计实现
- 多语言支持集成
- 用户交互优化

### 11.3 阶段三：后端API开发（2周）
- 核心API开发（服务、按摩师、预约）
- API文档编写
- API测试编写
- 错误处理和日志记录

### 11.4 阶段四：后台管理系统（3周）
- 管理员认证系统
- 内容管理功能
- TipTap编辑器集成
- 自动翻译功能

### 11.5 阶段五：预约系统（2周）
- 预约流程开发
- 预约管理功能
- 邮件通知系统
- 预约状态管理

### 11.6 阶段六：测试与优化（2周）
- 单元测试和集成测试
- API测试和端到端测试
- 性能优化
- 安全审查
- 用户体验改进

### 11.7 阶段七：部署与上线（1周）
- 生产环境配置
- 数据库迁移
- 监控系统设置
- 上线准备和发布

## 12. 维护与更新计划

### 12.1 定期维护
- **安全更新**：每月检查并更新依赖
- **数据库维护**：每周备份数据库
- **性能监控**：定期检查性能指标

### 12.2 功能迭代
- **短期计划**：根据用户反馈进行小型功能改进
- **中期计划**：每季度发布一次功能更新
- **长期计划**：每年进行一次大型功能升级

## 13. 风险评估与应对策略

### 13.1 技术风险
- **翻译质量不佳**：建立术语表，定期审核翻译质量
- **性能问题**：实施性能监控，及时优化
- **安全漏洞**：定期安全审查，及时更新依赖

### 13.2 业务风险
- **用户采用率低**：收集用户反馈，优化用户体验
- **预约流程复杂**：简化预约流程，提供清晰指引
- **内容管理困难**：优化后台界面，提供培训

## 附录

### A. 技术资源
- Next.js文档：https://nextjs.org/docs
- Prisma文档：https://www.prisma.io/docs
- TipTap文档：https://tiptap.dev/docs
- next-intl文档：https://next-intl-docs.vercel.app/

### B. 术语表
- **SSR**：服务器端渲染
- **ISR**：增量静态再生成
- **i18n**：国际化
- **ORM**：对象关系映射
- **API**：应用程序接口
- **CMS**：内容管理系统

## 14. 个人开发计划

本计划根据项目现状和重要性，将各模块划分为三种状态并设置优先级。为了更直观地展示，使用以下颜色标记：

### 开发状态标记
- 🟢 **已完成**：模块已经完成开发和测试
- 🟡 **进行中**：模块正在开发中
- 🔴 **待开发**：模块尚未开始开发

### 优先级标记
- 🔴 **P0**：最高优先级，核心功能，必须完成
- 🟠 **P1**：高优先级，重要功能，应该完成
- 🟡 **P2**：中等优先级，增强功能，可以延后
- 🟢 **P3**：低优先级，次要功能，有时间再做

### 14.1 已完成模块 🟢

| 模块 | 描述 | 优先级 | 状态 | 备注 |
|------|------|--------|------|------|
| 前端基础框架 | Next.js 14 + React 18 + TypeScript 项目搭建 | 🔴 P0 | 🟢 已完成 | 包含基本路由和项目结构 |
| 国际化框架 | next-intl 集成和基本配置 | 🔴 P0 | 🟢 已完成 | 支持英文、中文、泰语和韩语 |
| 前端组件-Header | 导航菜单和语言切换器 | 🟠 P1 | 🟢 已完成 | 已完成响应式设计 |
| 前端组件-Footer | 联系信息和社交媒体链接 | 🟠 P1 | 🟢 已完成 | 已完成响应式设计 |
| 前端组件-Hero | 首页轮播图展示 | 🟠 P1 | 🟢 已完成 | 已完成动画效果 |
| 前端组件-About | 关于我们简介 | 🟠 P1 | 🟢 已完成 | 已完成响应式设计 |
| 前端组件-Services | 服务项目展示 | 🟠 P1 | 🟢 已完成 | 已完成基本展示功能 |
| 前端组件-Therapists | 按摩师团队展示 | 🟠 P1 | 🟢 已完成 | 已完成基本展示功能 |
| 前端组件-Contact | 联系表单 | 🟠 P1 | 🟢 已完成 | 已完成表单验证 |
| 前端组件-LanguageSwitcher | 语言切换组件 | 🟠 P1 | 🟢 已完成 | 支持四种语言切换 |
| 静态资源 | 图片和图标资源 | 🟡 P2 | 🟢 已完成 | 已完成基本资源收集 |
| 工具脚本 | 图片处理和检查脚本 | 🟢 P3 | 🟢 已完成 | 已完成基本功能 |

### 14.2 进行中模块 🟡

| 模块 | 描述 | 优先级 | 状态 | 当前进度 | 下一步 |
|------|------|--------|------|----------|--------|
| 前端组件-Testimonials | 客户评价展示 | 🟡 P2 | 🟡 进行中 | 80% | 完善响应式设计和动画效果 |
| 前端页面-服务详情 | 单个服务的详细信息页面 | 🟠 P1 | 🟡 进行中 | 50% | 完善服务详情展示和相关服务推荐 |
| 前端页面-按摩师详情 | 单个按摩师的详细信息页面 | 🟠 P1 | 🟡 进行中 | 50% | 完善按摩师详情和预约入口 |
| 前端页面-预约流程 | 多步骤预约表单 | 🔴 P0 | 🟡 进行中 | 30% | 实现服务选择、时间选择和表单验证 |
| SEO优化 | 元数据和结构化数据 | 🟠 P1 | 🟡 进行中 | 60% | 完善多语言SEO和图片优化 |
| 响应式设计完善 | 确保在所有设备上的最佳体验 | 🟠 P1 | 🟡 进行中 | 70% | 优化移动端体验和交互设计 |

### 14.3 待开发模块 🔴

#### 14.3.1 前端功能（客户端）

| 模块 | 描述 | 优先级 | 状态 | 实施步骤 |
|------|------|--------|------|----------|
| 预约确认页面 | 预约成功后的确认页面 | 🟠 P1 | 🔴 待开发 | 1. 设计确认页面UI<br>2. 实现预约详情展示<br>3. 添加取消/修改预约功能 |
| 服务筛选功能 | 按类型、价格等筛选服务 | 🟡 P2 | 🔴 待开发 | 1. 设计筛选UI组件<br>2. 实现筛选逻辑<br>3. 优化筛选体验 |
| 按摩师筛选功能 | 按专长、经验等筛选按摩师 | 🟡 P2 | 🔴 待开发 | 1. 设计筛选UI组件<br>2. 实现筛选逻辑<br>3. 优化筛选体验 |
| 社交分享功能 | 分享服务到社交媒体 | 🟢 P3 | 🔴 待开发 | 1. 集成社交分享API<br>2. 设计分享按钮<br>3. 优化分享内容 |
| 用户反馈组件 | 收集用户对网站的反馈 | 🟢 P3 | 🔴 待开发 | 1. 设计反馈表单<br>2. 实现表单提交和验证<br>3. 添加感谢反馈页面 |

#### 14.3.2 后端功能（服务端）

| 模块 | 描述 | 优先级 | 状态 | 实施步骤 |
|------|------|--------|------|----------|
| 数据库设计与实现 | 使用Prisma设计和实现数据库 | 🔴 P0 | 🔴 待开发 | 1. 创建Prisma Schema<br>2. 设计数据表关系<br>3. 实现数据迁移 |
| API路由-服务管理 | 服务相关的API端点 | 🔴 P0 | 🔴 待开发 | 1. 实现CRUD操作<br>2. 添加数据验证<br>3. 实现错误处理 |
| API路由-按摩师管理 | 按摩师相关的API端点 | 🔴 P0 | 🔴 待开发 | 1. 实现CRUD操作<br>2. 添加数据验证<br>3. 实现错误处理 |
| API路由-预约管理 | 预约相关的API端点 | 🔴 P0 | 🔴 待开发 | 1. 实现预约创建和查询<br>2. 添加状态管理<br>3. 实现邮件通知 |
| API测试 | 测试所有API端点 | 🔴 P0 | 🔴 待开发 | 1. 设置测试环境<br>2. 编写API测试<br>3. 实现测试自动化 |
| 认证系统 | 管理员登录和权限控制 | 🟠 P1 | 🔴 待开发 | 1. 集成NextAuth.js<br>2. 实现登录和会话管理<br>3. 设置权限控制 |
| 图片上传功能 | 上传和管理图片资源 | 🟠 P1 | 🔴 待开发 | 1. 实现图片上传API<br>2. 添加图片处理和优化<br>3. 实现图片存储管理 |
| 邮件通知系统 | 预约确认和提醒邮件 | 🟠 P1 | 🔴 待开发 | 1. 集成邮件发送服务<br>2. 设计邮件模板<br>3. 实现触发逻辑 |

#### 14.3.3 管理后台

| 模块 | 描述 | 优先级 | 状态 | 实施步骤 |
|------|------|--------|------|----------|
| 管理后台-登录页面 | 管理员登录界面 | 🟠 P1 | 🔴 待开发 | 1. 设计登录UI<br>2. 实现登录逻辑<br>3. 添加安全措施 |
| 管理后台-仪表盘 | 数据概览和系统状态 | 🟠 P1 | 🔴 待开发 | 1. 设计仪表盘UI<br>2. 实现数据统计<br>3. 添加图表展示 |
| 管理后台-服务管理 | 添加、编辑、删除服务 | 🔴 P0 | 🔴 待开发 | 1. 设计服务管理UI<br>2. 实现CRUD操作<br>3. 添加批量操作功能 |
| 管理后台-按摩师管理 | 添加、编辑、删除按摩师 | 🔴 P0 | 🔴 待开发 | 1. 设计按摩师管理UI<br>2. 实现CRUD操作<br>3. 添加图片上传功能 |
| 管理后台-预约管理 | 查看和管理预约 | 🔴 P0 | 🔴 待开发 | 1. 设计预约列表UI<br>2. 实现状态管理<br>3. 添加筛选和导出功能 |
| 管理后台-用户管理 | 管理管理员账户 | 🟡 P2 | 🔴 待开发 | 1. 设计用户管理UI<br>2. 实现CRUD操作<br>3. 添加角色管理 |
| 管理后台-留言管理 | 查看和回复客户留言 | 🟡 P2 | 🔴 待开发 | 1. 设计留言列表UI<br>2. 实现回复功能<br>3. 添加状态管理 |

#### 14.3.4 自动翻译系统

| 模块 | 描述 | 优先级 | 状态 | 实施步骤 |
|------|------|--------|------|----------|
| 翻译服务集成 | 集成OpenRouter或其他翻译API | 🟠 P1 | 🔴 待开发 | 1. 研究API文档<br>2. 实现API调用<br>3. 处理错误和重试 |
| TipTap编辑器集成 | 实现富文本编辑器 | 🟠 P1 | 🔴 待开发 | 1. 集成TipTap<br>2. 自定义工具栏<br>3. 实现内容保存 |
| 翻译按钮和UI | 翻译触发和状态显示 | 🟠 P1 | 🔴 待开发 | 1. 设计翻译UI<br>2. 实现触发逻辑<br>3. 添加状态指示器 |
| Markdown处理 | 处理Markdown内容的翻译 | 🟡 P2 | 🔴 待开发 | 1. 实现Markdown解析<br>2. 处理特殊内容<br>3. 优化翻译质量 |
| 翻译缓存系统 | 使用Redis缓存翻译结果 | 🟡 P2 | 🔴 待开发 | 1. 设置Redis<br>2. 实现缓存逻辑<br>3. 优化缓存策略 |
| 术语表管理 | 管理专业术语的翻译 | 🟡 P2 | 🔴 待开发 | 1. 设计术语表UI<br>2. 实现术语表CRUD<br>3. 集成到翻译流程 |
| 翻译质量反馈 | 收集和处理翻译质量反馈 | 🟢 P3 | 🔴 待开发 | 1. 设计反馈UI<br>2. 实现反馈收集<br>3. 优化翻译质量 |

#### 14.3.5 性能和安全优化

| 模块 | 描述 | 优先级 | 状态 | 实施步骤 |
|------|------|--------|------|----------|
| 前端性能优化 | 优化加载和运行时性能 | 🟡 P2 | 🔴 待开发 | 1. 实现代码分割<br>2. 优化图片加载<br>3. 减少不必要的渲染 |
| API性能优化 | 优化API响应时间 | 🟡 P2 | 🔴 待开发 | 1. 实现数据缓存<br>2. 优化数据库查询<br>3. 实现批处理请求 |
| 安全措施实施 | 增强应用安全性 | 🟠 P1 | 🔴 待开发 | 1. 实现CSRF保护<br>2. 添加速率限制<br>3. 验证所有输入 |
| 错误监控 | 集成Sentry等错误监控工具 | 🟡 P2 | 🔴 待开发 | 1. 设置Sentry<br>2. 实现错误捕获<br>3. 优化错误报告 |
| 日志管理 | 实现系统日志记录和管理 | 🟡 P2 | 🔴 待开发 | 1. 设置日志系统<br>2. 实现日志记录<br>3. 优化日志查询 |

### 14.4 开发进度概览

下面是项目各主要模块的开发进度概览：

```
前端基础组件  [🟢🟢🟢🟢🟢🟢🟢🟢🟢🟢] 100%
前端页面开发  [🟢🟢🟢🟡🟡🔴🔴🔴🔴🔴]  40%
后端API开发  [🔴🔴🔴🔴🔴🔴🔴🔴🔴🔴]   0%
数据库实现   [🔴🔴🔴🔴🔴🔴🔴🔴🔴🔴]   0%
管理后台     [🔴🔴🔴🔴🔴🔴🔴🔴🔴🔴]   0%
自动翻译系统 [🔴🔴🔴🔴🔴🔴🔴🔴🔴🔴]   0%
性能和安全   [🔴🔴🔴🔴🔴🔴🔴🔴🔴🔴]   0%
```

### 14.5 开发建议

作为个人开发者，建议按照以下原则进行开发：

1. **优先完成核心功能**：先完成预约系统和内容管理等核心功能（🔴 P0），再开发次要功能
2. **增量开发**：采用小步快跑的方式，每次完成一个小功能并测试
3. **先简后繁**：先实现简单版本，确保基本功能可用，再逐步添加高级特性
4. **重视用户体验**：在开发过程中持续关注用户体验，及时调整设计和功能
5. **灵活调整优先级**：根据实际情况和用户反馈灵活调整开发优先级
6. **定期回顾和重构**：定期回顾已完成的代码，进行必要的重构和优化
7. **保持文档更新**：随着开发进展，及时更新开发文档和计划

### 14.6 开发顺序建议

基于优先级和依赖关系，建议按照以下顺序进行开发：

1. **第一阶段**：完成数据库设计与实现 🔴 P0
2. **第二阶段**：实现核心API（服务、按摩师、预约）🔴 P0
3. **第三阶段**：编写API测试 🔴 P0
4. **第四阶段**：完成预约流程前端页面 🔴 P0
5. **第五阶段**：实现管理后台的核心功能（服务、按摩师、预约管理）🔴 P0
6. **第六阶段**：实现自动翻译系统 🟠 P1
7. **第七阶段**：完善前端体验和SEO优化 🟠 P1
8. **第八阶段**：实现性能和安全优化 🟡 P2
9. **第九阶段**：添加次要功能和增强特性 🟢 P3 